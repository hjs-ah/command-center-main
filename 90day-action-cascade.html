<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>90-Day Action Cascade | Executive Command Center</title>
    <style>
        :root {
            --bg-page: #ffffff; --bg-card: #f8f9fa; --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a; --text-muted: #7a7a7a; --accent-color: #ffe000;
            --border-color: #e5e5e5; --shadow: rgba(0, 0, 0, 0.05);
        }
        [data-theme="dark"] {
            --bg-page: #0a0a0a; --bg-card: #1a1a1a; --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0; --text-muted: #808080; --border-color: #2a2a2a;
            --shadow: rgba(255, 255, 255, 0.05);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-page); color: var(--text-primary); line-height: 1.6;
            padding: 40px 20px; transition: all 0.3s ease;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
        h1 { font-size: 28px; font-weight: 700; }
        .subtitle { font-size: 11px; color: var(--text-muted); margin-top: 4px; font-style: italic; }
        .controls { display: flex; gap: 12px; }
        .btn {
            background: var(--bg-card); border: 1px solid var(--border-color);
            padding: 8px 16px; border-radius: 6px; font-size: 12px; font-weight: 500;
            color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; text-decoration: none;
        }
        .btn:hover { background: var(--bg-page); color: var(--text-primary);
            border-color: var(--text-muted); transform: translateY(-1px); }
        
        /* Domain Tabs */
        .domain-tabs {
            display: flex; gap: 8px; margin-bottom: 32px; flex-wrap: wrap;
        }
        .domain-tab {
            padding: 10px 20px; background: transparent;
            border: 1px solid var(--border-color); border-radius: 6px;
            cursor: pointer; font-size: 13px; font-weight: 600;
            color: var(--text-secondary); transition: all 0.2s ease;
        }
        .domain-tab:hover { background: var(--bg-card); }
        .domain-tab.active {
            background: var(--accent-color); color: #1a1a1a; border-color: var(--accent-color);
        }
        .domain-content { display: none; }
        .domain-content.active { display: block; }
        
        .weeks-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px; margin-top: 30px;
        }
        .week-card {
            background: var(--bg-card); border: 1px solid var(--border-color);
            border-radius: 8px; padding: 20px;
        }
        .week-header {
            font-size: 14px; font-weight: 700; margin-bottom: 12px;
            padding-bottom: 8px; border-bottom: 2px solid var(--accent-color);
        }
        .action-list { display: flex; flex-direction: column; gap: 8px; }
        .action {
            background: var(--bg-page); border: 1px solid var(--border-color);
            border-radius: 4px; padding: 10px; font-size: 12px;
        }
        .action input {
            width: 100%; background: transparent; border: none; color: var(--text-primary);
            outline: none; margin-bottom: 4px; font-weight: 600;
        }
        .action select {
            background: var(--bg-card); border: 1px solid var(--border-color);
            padding: 2px 6px; border-radius: 3px; font-size: 10px; color: var(--text-primary);
        }
        .add-action {
            width: 100%; padding: 8px; margin-top: 8px; background: transparent;
            border: 2px dashed var(--border-color); border-radius: 4px;
            color: var(--text-muted); cursor: pointer; font-size: 11px; font-weight: 600;
        }
        .add-action:hover { border-color: var(--accent-color); color: var(--accent-color); }
        .priority-high { border-left: 3px solid #ef4444; }
        .priority-medium { border-left: 3px solid #f59e0b; }
        .priority-low { border-left: 3px solid #10b981; }
        @media (max-width: 768px) { .weeks-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>90-Day Action Cascade</h1>
                <p class="subtitle">Quarterly Execution Framework</p>
            </div>
            <div class="controls">
                <button class="btn" onclick="toggleTheme()">üåô Dark Mode</button>
                <button class="btn" onclick="exportData()">üìä Export</button>
                <a href="index.html" class="btn">‚Üê Dashboard</a>
            </div>
        </header>

        <!-- Domain Tabs -->
        <div class="domain-tabs" id="domainTabs">
            <button class="domain-tab active" onclick="switchDomain('builders')">Builder's Conference</button>
            <button class="domain-tab" onclick="switchDomain('professional')">Professional/Career</button>
            <button class="domain-tab" onclick="switchDomain('chess')">Chess Not Checkers</button>
        </div>

        <div id="domainContents"></div>
    </div>

    <script>
        let currentDomain = 'builders';
        let data = {};
        let domains = [
            { id: 'builders', name: "Builder's Conference" },
            { id: 'professional', name: 'Professional/Career' },
            { id: 'chess', name: 'Chess Not Checkers' }
        ];
        let counter = 0;

        window.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            loadCustomDomains();
            loadData();
            renderAllDomains();
            switchDomain('builders');
        });

        function loadCustomDomains() {
            const customDomains = JSON.parse(localStorage.getItem('customDomains') || '[]');
            const tabsContainer = document.getElementById('domainTabs');
            
            customDomains.forEach(domain => {
                domains.push({ id: domain.id, name: domain.name });
                
                const tab = document.createElement('button');
                tab.className = 'domain-tab';
                tab.textContent = domain.name;
                tab.onclick = () => switchDomain(domain.id);
                tabsContainer.appendChild(tab);
            });
        }

        function switchDomain(domainId) {
            currentDomain = domainId;
            
            document.querySelectorAll('.domain-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            document.querySelectorAll('.domain-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const content = document.getElementById(`${domainId}-content`);
            if (content) {
                content.classList.add('active');
            }
        }

        function renderAllDomains() {
            const container = document.getElementById('domainContents');
            container.innerHTML = '';
            
            domains.forEach((domain, index) => {
                const domainContent = createDomainHTML(domain.id, domain.name, index === 0);
                container.appendChild(domainContent);
            });
            
            renderAll();
        }

        function createDomainHTML(domainId, domainName, isActive) {
            const div = document.createElement('div');
            div.id = `${domainId}-content`;
            div.className = `domain-content ${isActive ? 'active' : ''}`;
            
            div.innerHTML = `<div class="weeks-grid" id="${domainId}-weeks-grid"></div>`;
            
            return div;
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const btn = document.querySelector('.controls .btn');
            btn.textContent = newTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        }

        function loadTheme() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            
            const btn = document.querySelector('.controls .btn');
            if (btn) {
                btn.textContent = theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
            }
        }

        function initDomain(domainId) {
            if (!data[domainId] || data[domainId].length === 0) {
                data[domainId] = [];
                for (let i = 1; i <= 13; i++) {
                    data[domainId].push({ week: i, actions: [] });
                }
            }
        }

        function addAction(domainId, week) {
            const text = prompt('Enter action item:');
            if (!text || text.trim() === '') return;
            counter++;
            const weekData = data[domainId].find(w => w.week === week);
            weekData.actions.push({ id: `action-${counter}`, text, priority: 'medium', completed: false });
            renderDomain(domainId);
            save();
        }

        function deleteAction(domainId, week, id) {
            const weekData = data[domainId].find(w => w.week === week);
            weekData.actions = weekData.actions.filter(a => a.id !== id);
            renderDomain(domainId);
            save();
        }

        function updateAction(domainId, week, id, field, value) {
            const weekData = data[domainId].find(w => w.week === week);
            const action = weekData.actions.find(a => a.id === id);
            if (action) { action[field] = value; save(); }
        }

        function renderDomain(domainId) {
            if (!data[domainId]) {
                initDomain(domainId);
            }
            
            const grid = document.getElementById(`${domainId}-weeks-grid`);
            if (!grid) return;
            
            grid.innerHTML = data[domainId].map(week => `
                <div class="week-card">
                    <div class="week-header">Week ${week.week}</div>
                    <div class="action-list">
                        ${week.actions.map(a => `
                            <div class="action priority-${a.priority}">
                                <input type="text" value="${a.text}" onchange="updateAction('${domainId}', ${week.week}, '${a.id}', 'text', this.value)">
                                <div style="display: flex; gap: 8px; align-items: center; margin-top: 4px;">
                                    <select onchange="updateAction('${domainId}', ${week.week}, '${a.id}', 'priority', this.value); renderDomain('${domainId}');">
                                        <option value="high" ${a.priority === 'high' ? 'selected' : ''}>High</option>
                                        <option value="medium" ${a.priority === 'medium' ? 'selected' : ''}>Medium</option>
                                        <option value="low" ${a.priority === 'low' ? 'selected' : ''}>Low</option>
                                    </select>
                                    <label style="font-size: 10px; display: flex; gap: 4px; align-items: center;">
                                        <input type="checkbox" ${a.completed ? 'checked' : ''} onchange="updateAction('${domainId}', ${week.week}, '${a.id}', 'completed', this.checked)">
                                        Done
                                    </label>
                                    <button style="margin-left:auto; padding:2px 6px; background:transparent; border:1px solid var(--border-color); border-radius:3px; font-size:9px; cursor:pointer;" onclick="deleteAction('${domainId}', ${week.week}, '${a.id}')">üóëÔ∏è</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <button class="add-action" onclick="addAction('${domainId}', ${week.week})">+ Add Action</button>
                </div>
            `).join('');
        }

        function renderAll() {
            domains.forEach(domain => {
                initDomain(domain.id);
                renderDomain(domain.id);
            });
        }

        function save() { 
            localStorage.setItem('90day-action-cascade', JSON.stringify(data)); 
        }
        
        function loadData() {
            const saved = localStorage.getItem('90day-action-cascade');
            if (saved) { 
                data = JSON.parse(saved); 
            } else {
                domains.forEach(domain => {
                    initDomain(domain.id);
                });
            }
            
            domains.forEach(domain => {
                if (!data[domain.id]) {
                    initDomain(domain.id);
                }
            });
        }

        function exportData() {
            const blob = new Blob([JSON.stringify({ timestamp: new Date().toISOString(), data }, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob); const a = document.createElement('a');
            a.href = url; a.download = `90day-cascade-${new Date().toISOString().split('T')[0]}.json`;
            a.click(); URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
