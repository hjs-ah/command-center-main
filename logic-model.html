<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logic Model | Executive Command Center</title>
    <style>
        :root {
            --bg-page: #ffffff; --bg-card: #f8f9fa; --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a; --text-muted: #7a7a7a; --accent-color: #ffe000;
            --border-color: #e5e5e5; --shadow: rgba(0, 0, 0, 0.05);
        }
        [data-theme="dark"] {
            --bg-page: #0a0a0a; --bg-card: #1a1a1a; --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0; --text-muted: #808080; --border-color: #2a2a2a;
            --shadow: rgba(255, 255, 255, 0.05);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-page); color: var(--text-primary); line-height: 1.6;
            padding: 40px 20px; transition: all 0.3s ease;
        }
        .container { max-width: 1600px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
        h1 { font-size: 28px; font-weight: 700; }
        .subtitle { font-size: 11px; color: var(--text-muted); margin-top: 4px; font-style: italic; }
        .controls { display: flex; gap: 12px; }
        .btn {
            background: var(--bg-card); border: 1px solid var(--border-color);
            padding: 8px 16px; border-radius: 6px; font-size: 12px; font-weight: 500;
            color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; text-decoration: none;
        }
        .btn:hover { background: var(--bg-page); color: var(--text-primary);
            border-color: var(--text-muted); transform: translateY(-1px); }
        
        /* Domain Tabs */
        .domain-tabs {
            display: flex; gap: 8px; margin-bottom: 32px; flex-wrap: wrap;
        }
        .domain-tab {
            padding: 10px 20px; background: transparent;
            border: 1px solid var(--border-color); border-radius: 6px;
            cursor: pointer; font-size: 13px; font-weight: 600;
            color: var(--text-secondary); transition: all 0.2s ease;
        }
        .domain-tab:hover { background: var(--bg-card); }
        .domain-tab.active {
            background: var(--accent-color); color: #1a1a1a; border-color: var(--accent-color);
        }
        .domain-content { display: none; }
        .domain-content.active { display: block; }
        
        .logic-flow {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin-top: 30px;
        }
        .logic-stage {
            background: var(--bg-card); border: 1px solid var(--border-color);
            border-radius: 8px; padding: 20px;
        }
        .stage-header {
            margin-bottom: 12px;
        }
        .stage-title {
            font-size: 14px; font-weight: 700; color: var(--text-primary);
            margin-bottom: 8px;
        }
        .stage-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 4px;
        }
        .badge-inputs { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
        .badge-activities { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .badge-outputs { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        .badge-outcomes { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .badge-impact { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
        .stage-description {
            font-size: 11px; color: var(--text-muted);
            margin-bottom: 16px; line-height: 1.5;
        }
        .stage-items { display: flex; flex-direction: column; gap: 8px; }
        .stage-item {
            background: var(--bg-page); border: 1px solid var(--border-color);
            border-radius: 4px; padding: 12px; font-size: 12px; color: var(--text-secondary);
            cursor: pointer; transition: all 0.2s ease; position: relative;
        }
        .stage-item:hover {
            background: var(--accent-color); color: #1a1a1a; border-color: var(--accent-color);
            transform: translateX(2px);
        }
        .stage-item .delete-btn {
            position: absolute; right: 6px; top: 6px; font-size: 10px; opacity: 0;
            transition: opacity 0.2s ease;
        }
        .stage-item:hover .delete-btn { opacity: 1; }
        .add-item-btn {
            width: 100%; padding: 10px; margin-top: 8px; background: transparent;
            border: 2px dashed var(--border-color); border-radius: 4px;
            color: var(--text-muted); cursor: pointer; font-size: 11px;
            font-weight: 600; transition: all 0.2s ease;
        }
        .add-item-btn:hover { border-color: var(--accent-color); color: var(--accent-color); }
        
        /* Progress Overview */
        .overview-section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }
        .overview-section h2 {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
        }
        .overview-stat {
            text-align: center;
            padding: 16px;
            background: var(--bg-page);
            border: 1px solid var(--border-color);
            border-radius: 6px;
        }
        .overview-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 4px;
        }
        .overview-stat-label {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }
        
        /* Progress Indicators */
        .progress-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 16px;
        }
        .progress-bar-container {
            flex: 1;
            height: 6px;
            background: var(--bg-page);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            transition: width 0.3s ease;
        }
        .inputs-progress { background: #8b5cf6; }
        .activities-progress { background: #3b82f6; }
        .outputs-progress { background: #10b981; }
        .outcomes-progress { background: #f59e0b; }
        .impact-progress { background: #ef4444; }
        
        @media (max-width: 1200px) { .logic-flow { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>Logic Model Tracker</h1>
                <p class="subtitle">W.K. Kellogg Foundation Logic Model Development Guide</p>
            </div>
            <div class="controls">
                <button class="btn" onclick="toggleTheme()">üåô Dark Mode</button>
                <button class="btn" onclick="exportData()">üìä Export</button>
                <a href="index.html" class="btn">‚Üê Dashboard</a>
            </div>
        </header>

        <!-- Domain Tabs -->
        <div class="domain-tabs" id="domainTabs">
            <button class="domain-tab active" onclick="switchDomain('builders')">Builder's Conference</button>
            <button class="domain-tab" onclick="switchDomain('professional')">Professional/Career</button>
            <button class="domain-tab" onclick="switchDomain('chess')">Chess Not Checkers</button>
        </div>

        <!-- Domain Contents Container -->
        <div id="domainContents"></div>
    </div>

    <script>
        let currentDomain = 'builders';
        let data = {};
        let domains = [
            { id: 'builders', name: "Builder's Conference" },
            { id: 'professional', name: 'Professional/Career' },
            { id: 'chess', name: 'Chess Not Checkers' }
        ];
        let itemCounter = 0;

        window.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            loadCustomDomains();
            loadData();
            renderAllDomains();
            switchDomain('builders');
        });

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const btn = document.querySelector('.controls .btn');
            btn.textContent = newTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        }

        function loadTheme() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            
            const btn = document.querySelector('.controls .btn');
            if (btn) {
                btn.textContent = theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
            }
        }

        // Load Custom Domains
        function loadCustomDomains() {
            const customDomains = JSON.parse(localStorage.getItem('customDomains') || '[]');
            const tabsContainer = document.getElementById('domainTabs');
            
            customDomains.forEach(domain => {
                domains.push({ id: domain.id, name: domain.name });
                
                const tab = document.createElement('button');
                tab.className = 'domain-tab';
                tab.textContent = domain.name;
                tab.onclick = () => switchDomain(domain.id);
                tabsContainer.appendChild(tab);
            });
        }

        // Switch Domain
        function switchDomain(domainId) {
            currentDomain = domainId;
            
            document.querySelectorAll('.domain-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            document.querySelectorAll('.domain-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const content = document.getElementById(`${domainId}-content`);
            if (content) {
                content.classList.add('active');
            }
        }

        // Render All Domains
        function renderAllDomains() {
            const container = document.getElementById('domainContents');
            container.innerHTML = '';
            
            domains.forEach((domain, index) => {
                const domainContent = createDomainHTML(domain.id, domain.name, index === 0);
                container.appendChild(domainContent);
            });
            
            renderAll();
        }

        // Create Domain HTML
        function createDomainHTML(domainId, domainName, isActive) {
            const div = document.createElement('div');
            div.id = `${domainId}-content`;
            div.className = `domain-content ${isActive ? 'active' : ''}`;
            
            div.innerHTML = `
                <!-- Progress Overview -->
                <div class="overview-section">
                    <h2>${domainName} - Progress Overview</h2>
                    <div class="overview-grid">
                        <div class="overview-stat">
                            <div class="overview-stat-value" id="${domainId}-inputs-count">0</div>
                            <div class="overview-stat-label">Inputs Secured</div>
                        </div>
                        <div class="overview-stat">
                            <div class="overview-stat-value" id="${domainId}-activities-count">0</div>
                            <div class="overview-stat-label">Activities Planned</div>
                        </div>
                        <div class="overview-stat">
                            <div class="overview-stat-value" id="${domainId}-outputs-count">0</div>
                            <div class="overview-stat-label">Output Metrics</div>
                        </div>
                        <div class="overview-stat">
                            <div class="overview-stat-value" id="${domainId}-outcomes-count">0</div>
                            <div class="overview-stat-label">Outcome Goals</div>
                        </div>
                        <div class="overview-stat">
                            <div class="overview-stat-value" id="${domainId}-impact-count">0</div>
                            <div class="overview-stat-label">Impact Indicators</div>
                        </div>
                    </div>
                </div>

                <div class="logic-flow">
                    <!-- Inputs -->
                    <div class="logic-stage">
                        <div class="stage-header">
                            <div class="stage-title">
                                <span class="stage-badge badge-inputs">INPUTS</span><br>
                                What You Invest
                            </div>
                        </div>
                        <div class="stage-description">
                            Financial resources, human capital, partnerships, infrastructure, and intellectual capital
                        </div>
                        <div class="stage-items" id="${domainId}-inputs"></div>
                        <button class="add-item-btn" onclick="addItem('${domainId}', 'inputs')">+ Add Input</button>
                        <div class="progress-indicator">
                            <span style="font-size: 11px; color: var(--text-muted);">Progress:</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill inputs-progress" id="${domainId}-inputs-progress" style="width: 0%"></div>
                            </div>
                            <span id="${domainId}-inputs-percent" style="font-size: 11px; font-weight: 600;">0%</span>
                        </div>
                    </div>
                    
                    <!-- Activities -->
                    <div class="logic-stage">
                        <div class="stage-header">
                            <div class="stage-title">
                                <span class="stage-badge badge-activities">ACTIVITIES</span><br>
                                What You Do
                            </div>
                        </div>
                        <div class="stage-description">
                            Programs, training, workshops, networking sessions, resource distribution, implementation
                        </div>
                        <div class="stage-items" id="${domainId}-activities"></div>
                        <button class="add-item-btn" onclick="addItem('${domainId}', 'activities')">+ Add Activity</button>
                        <div class="progress-indicator">
                            <span style="font-size: 11px; color: var(--text-muted);">Progress:</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill activities-progress" id="${domainId}-activities-progress" style="width: 0%"></div>
                            </div>
                            <span id="${domainId}-activities-percent" style="font-size: 11px; font-weight: 600;">0%</span>
                        </div>
                    </div>
                    
                    <!-- Outputs -->
                    <div class="logic-stage">
                        <div class="stage-header">
                            <div class="stage-title">
                                <span class="stage-badge badge-outputs">OUTPUTS</span><br>
                                Immediate Results
                            </div>
                        </div>
                        <div class="stage-description">
                            Number of participants, deliverables completed, matches made, workshops delivered, partnerships formalized
                        </div>
                        <div class="stage-items" id="${domainId}-outputs"></div>
                        <button class="add-item-btn" onclick="addItem('${domainId}', 'outputs')">+ Add Output</button>
                        <div class="progress-indicator">
                            <span style="font-size: 11px; color: var(--text-muted);">Achievement:</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill outputs-progress" id="${domainId}-outputs-progress" style="width: 0%"></div>
                            </div>
                            <span id="${domainId}-outputs-percent" style="font-size: 11px; font-weight: 600;">0%</span>
                        </div>
                    </div>
                    
                    <!-- Outcomes -->
                    <div class="logic-stage">
                        <div class="stage-header">
                            <div class="stage-title">
                                <span class="stage-badge badge-outcomes">OUTCOMES</span><br>
                                Short-term Changes
                            </div>
                        </div>
                        <div class="stage-description">
                            Knowledge increases, relationships established, plans created, networks accessed, confidence demonstrated
                        </div>
                        <div class="stage-items" id="${domainId}-outcomes"></div>
                        <button class="add-item-btn" onclick="addItem('${domainId}', 'outcomes')">+ Add Outcome</button>
                        <div class="progress-indicator">
                            <span style="font-size: 11px; color: var(--text-muted);">Achievement:</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill outcomes-progress" id="${domainId}-outcomes-progress" style="width: 0%"></div>
                            </div>
                            <span id="${domainId}-outcomes-percent" style="font-size: 11px; font-weight: 600;">0%</span>
                        </div>
                    </div>
                    
                    <!-- Impact -->
                    <div class="logic-stage">
                        <div class="stage-header">
                            <div class="stage-title">
                                <span class="stage-badge badge-impact">IMPACT</span><br>
                                Systemic Change
                            </div>
                        </div>
                        <div class="stage-description">
                            Long-term systemic changes, reduced disparities, self-sustaining ecosystem, replicable model
                        </div>
                        <div class="stage-items" id="${domainId}-impact"></div>
                        <button class="add-item-btn" onclick="addItem('${domainId}', 'impact')">+ Add Impact</button>
                        <div class="progress-indicator">
                            <span style="font-size: 11px; color: var(--text-muted);">Progress:</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill impact-progress" id="${domainId}-impact-progress" style="width: 0%"></div>
                            </div>
                            <span id="${domainId}-impact-percent" style="font-size: 11px; font-weight: 600;">0%</span>
                        </div>
                    </div>
                </div>
            `;
            
            return div;
        }

        function addItem(domainId, stage) {
            const stageNames = {
                inputs: 'Input',
                activities: 'Activity',
                outputs: 'Output',
                outcomes: 'Outcome',
                impact: 'Impact'
            };
            const text = prompt(`Enter ${stageNames[stage]}:`);
            if (!text || text.trim() === '') return;
            itemCounter++;
            
            if (!data[domainId]) {
                data[domainId] = {
                    inputs: [], activities: [], outputs: [], outcomes: [], impact: []
                };
            }
            
            data[domainId][stage].push({ id: `item-${itemCounter}`, text });
            renderDomain(domainId);
            saveData();
        }

        function deleteItem(domainId, stage, id) {
            if (!confirm('Delete this item?')) return;
            data[domainId][stage] = data[domainId][stage].filter(i => i.id !== id);
            renderDomain(domainId);
            saveData();
        }

        function renderDomain(domainId) {
            if (!data[domainId]) {
                data[domainId] = {
                    inputs: [], activities: [], outputs: [], outcomes: [], impact: []
                };
            }
            
            const stages = ['inputs', 'activities', 'outputs', 'outcomes', 'impact'];
            
            // Update overview counts
            stages.forEach(stage => {
                const count = data[domainId][stage].length;
                const countEl = document.getElementById(`${domainId}-${stage}-count`);
                if (countEl) {
                    countEl.textContent = count;
                }
            });
            
            // Render stage items and update progress
            stages.forEach(stage => {
                const container = document.getElementById(`${domainId}-${stage}`);
                if (container) {
                    container.innerHTML = data[domainId][stage].map(item => `
                        <div class="stage-item" onclick="deleteItem('${domainId}', '${stage}', '${item.id}')">
                            ${item.text}
                            <span class="delete-btn">üóëÔ∏è</span>
                        </div>
                    `).join('');
                }
                
                // Update progress bar (simple: 100% if at least one item, 0% if none)
                // You can make this more sophisticated based on item completion if needed
                const items = data[domainId][stage];
                const progress = items.length > 0 ? 100 : 0;
                
                const progressBar = document.getElementById(`${domainId}-${stage}-progress`);
                const progressPercent = document.getElementById(`${domainId}-${stage}-percent`);
                
                if (progressBar) {
                    progressBar.style.width = `${progress}%`;
                }
                if (progressPercent) {
                    progressPercent.textContent = `${progress}%`;
                }
            });
        }

        function renderAll() {
            domains.forEach(domain => {
                renderDomain(domain.id);
            });
        }

        function saveData() {
            localStorage.setItem('logic-model', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('logic-model');
            if (saved) {
                data = JSON.parse(saved);
            } else {
                // Initialize data for all domains
                domains.forEach(domain => {
                    data[domain.id] = {
                        inputs: [], activities: [], outputs: [], outcomes: [], impact: []
                    };
                });
            }
            
            // Ensure all domains have data structure
            domains.forEach(domain => {
                if (!data[domain.id]) {
                    data[domain.id] = {
                        inputs: [], activities: [], outputs: [], outcomes: [], impact: []
                    };
                }
            });
        }

        function exportData() {
            const exportData = {
                timestamp: new Date().toISOString(),
                model: data
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `logic-model-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
