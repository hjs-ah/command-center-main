<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategy Deployment Matrix | Executive Command Center</title>
    <style>
        :root {
            --bg-page: #ffffff;
            --bg-card: #f8f9fa;
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --text-muted: #7a7a7a;
            --accent-color: #ffe000;
            --border-color: #e5e5e5;
            --shadow: rgba(0, 0, 0, 0.05);
        }

        [data-theme="dark"] {
            --bg-page: #0a0a0a;
            --bg-card: #1a1a1a;
            --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0;
            --text-muted: #808080;
            --border-color: #2a2a2a;
            --shadow: rgba(255, 255, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-page);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 40px 20px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
            font-weight: 500;
        }

        .citation {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
            font-style: italic;
        }

        .controls {
            display: flex;
            gap: 12px;
        }

        .btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: var(--accent-color);
            color: var(--text-primary);
            border-color: var(--accent-color);
        }

        .domain-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        .domain-tab {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .domain-tab:hover {
            background: var(--bg-card);
        }

        .domain-tab.active {
            background: var(--accent-color);
            color: #1a1a1a;
            border-color: var(--accent-color);
        }

        .domain-content {
            display: none;
        }

        .domain-content.active {
            display: block;
        }

        /* Strategic Overview */
        .progress-overview {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .section-header {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .stat-item {
            text-align: center;
            padding: 16px;
            background: var(--bg-page);
            border: 1px solid var(--border-color);
            border-radius: 6px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }

        /* Sections */
        .matrix-section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .matrix-section h3 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .matrix-section > p {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        textarea, input[type="text"], input[type="date"], select {
            width: 100%;
            background: var(--bg-page);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 12px;
            font-size: 13px;
            color: var(--text-primary);
            font-family: inherit;
            transition: all 0.2s ease;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        textarea:focus, input:focus, select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        /* Item Lists */
        .item {
            background: var(--bg-page);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .item input, .item textarea {
            margin-bottom: 8px;
        }

        .item-meta {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            font-size: 11px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .item-meta label {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .item-meta select, .item-meta input {
            padding: 6px 10px;
            font-size: 11px;
        }

        .item-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .item-actions button {
            padding: 6px 12px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .item-actions button:hover {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .milestone-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .milestone-status input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .add-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 2px dashed var(--border-color);
            border-radius: 6px;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
            margin-top: 12px;
        }

        .add-btn:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }

            .controls {
                width: 100%;
                flex-wrap: wrap;
            }

            .progress-stats {
                grid-template-columns: 1fr;
            }

            .item-meta {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>üìã Strategy Deployment Matrix</h1>
                <p class="subtitle">One-page strategic visibility for ruthless prioritization</p>
                <p class="citation">Ruthless prioritization framework - McKinsey Strategy Deployment Model</p>
            </div>
            <div class="controls">
                <button class="btn" onclick="toggleTheme()">üåô Dark Mode</button>
                <button class="btn" onclick="saveAll()">üíæ Save</button>
                <button class="btn" onclick="exportData()">üìä Export</button>
                <a href="index.html" class="btn">‚Üê Dashboard</a>
            </div>
        </header>

        <!-- Domain Tabs -->
        <div class="domain-tabs" id="domainTabs">
            <button class="domain-tab active" onclick="switchTab('builders')">Builder's Conference</button>
            <button class="domain-tab" onclick="switchTab('professional')">Professional/Career</button>
            <button class="domain-tab" onclick="switchTab('chess')">Chess Not Checkers</button>
        </div>

        <!-- Domain Contents will be inserted here dynamically -->
        <div id="domainContents"></div>
    </div>

    <script>
        const STORAGE_KEY = 'strategy_deployment_matrix';
        let currentDomain = 'builders';
        let data = {};
        let domains = [
            { id: 'builders', name: "Builder's Conference" },
            { id: 'professional', name: 'Professional/Career' },
            { id: 'chess', name: 'Chess Not Checkers' }
        ];

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            loadCustomDomains();
            loadData();
            renderAllDomains();
            switchTab('builders');
        });

        // Theme Management
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const btn = document.querySelector('.controls .btn');
            btn.textContent = newTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        }

        function loadTheme() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            
            const btn = document.querySelector('.controls .btn');
            if (btn) {
                btn.textContent = theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
            }
        }

        // Load Custom Domains
        function loadCustomDomains() {
            const customDomains = JSON.parse(localStorage.getItem('customDomains') || '[]');
            const tabsContainer = document.getElementById('domainTabs');
            
            customDomains.forEach(domain => {
                domains.push({ id: domain.id, name: domain.name });
                
                const tab = document.createElement('button');
                tab.className = 'domain-tab';
                tab.textContent = domain.name;
                tab.onclick = () => switchTab(domain.id);
                tabsContainer.appendChild(tab);
            });
        }

        // Switch Domain Tab
        function switchTab(domainId) {
            currentDomain = domainId;
            
            document.querySelectorAll('.domain-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            document.querySelectorAll('.domain-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const content = document.getElementById(`${domainId}-content`);
            if (content) {
                content.classList.add('active');
            }
        }

        // Render All Domain Contents
        function renderAllDomains() {
            const container = document.getElementById('domainContents');
            container.innerHTML = '';
            
            domains.forEach((domain, index) => {
                const domainContent = createDomainHTML(domain.id, domain.name, index === 0);
                container.appendChild(domainContent);
            });
        }

        // Create Domain HTML
        function createDomainHTML(domainId, domainName, isActive) {
            const div = document.createElement('div');
            div.id = `${domainId}-content`;
            div.className = `domain-content ${isActive ? 'active' : ''}`;
            
            div.innerHTML = `
                <!-- Strategic Overview -->
                <div class="progress-overview">
                    <h2 class="section-header">${domainName} - Strategic Overview</h2>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="${domainId}-csf-count">0/5</div>
                            <div class="stat-label">Critical Success Factors</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="${domainId}-milestone-count">0/12</div>
                            <div class="stat-label">90-Day Milestones</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="${domainId}-risk-count">0/3</div>
                            <div class="stat-label">Risks Mitigated</div>
                        </div>
                    </div>
                </div>

                <!-- Strategic Objective -->
                <div class="matrix-section">
                    <h3 class="section-header">Strategic Objective</h3>
                    <div class="input-group">
                        <label class="input-label">What are you ultimately achieving?</label>
                        <textarea id="${domainId}-objective" 
                                  placeholder="Example: Launch sustainable economic empowerment ecosystem in Philadelphia by Q1 2026"
                                  onchange="updateObjective('${domainId}', this.value)"></textarea>
                    </div>
                </div>

                <!-- Critical Success Factors -->
                <div class="matrix-section">
                    <h3>Critical Success Factors (3-5)</h3>
                    <p>What MUST happen for this to succeed?</p>
                    <div id="${domainId}-csf-list"></div>
                    <button class="add-btn" onclick="addCSF('${domainId}')">+ Add Success Factor</button>
                </div>

                <!-- 90-Day Milestones -->
                <div class="matrix-section">
                    <h3>90-Day Milestones</h3>
                    <p>Non-negotiable checkpoints with dates</p>
                    <div id="${domainId}-milestone-list"></div>
                    <button class="add-btn" onclick="addMilestone('${domainId}')">+ Add Milestone</button>
                </div>

                <!-- Resource Commitments -->
                <div class="matrix-section">
                    <h3>Resource Commitments</h3>
                    <p>What's actually allocated (not hoped for)</p>
                    <div id="${domainId}-resource-list"></div>
                    <button class="add-btn" onclick="addResource('${domainId}')">+ Add Resource</button>
                </div>

                <!-- Risk Mitigation -->
                <div class="matrix-section">
                    <h3>Risk Mitigation</h3>
                    <p>Top 3 threats to success and contingency responses</p>
                    <div id="${domainId}-risk-list"></div>
                    <button class="add-btn" onclick="addRisk('${domainId}')">+ Add Risk</button>
                </div>
            `;
            
            return div;
        }

        // Load Data
        function loadData() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                data = JSON.parse(saved);
            } else {
                // Initialize data for all domains
                domains.forEach(domain => {
                    data[domain.id] = {
                        objective: '',
                        csf: [],
                        milestones: [],
                        resources: [],
                        risks: []
                    };
                });
            }
            
            // Ensure all domains have data structure
            domains.forEach(domain => {
                if (!data[domain.id]) {
                    data[domain.id] = {
                        objective: '',
                        csf: [],
                        milestones: [],
                        resources: [],
                        risks: []
                    };
                }
            });
            
            renderAll();
        }

        // Update Objective
        function updateObjective(domainId, value) {
            data[domainId].objective = value;
            saveAll();
        }

        // Add CSF
        function addCSF(domainId) {
            const text = prompt('Enter Critical Success Factor:');
            if (!text || text.trim() === '') return;
            
            const id = `csf-${Date.now()}`;
            data[domainId].csf.push({ id, text });
            renderDomain(domainId);
            saveAll();
        }

        // Add Milestone
        function addMilestone(domainId) {
            const text = prompt('Enter Milestone:');
            if (!text || text.trim() === '') return;
            
            const id = `milestone-${Date.now()}`;
            data[domainId].milestones.push({
                id,
                text,
                date: '',
                completed: false
            });
            renderDomain(domainId);
            saveAll();
        }

        // Add Resource
        function addResource(domainId) {
            const text = prompt('Enter Resource Commitment:');
            if (!text || text.trim() === '') return;
            
            const id = `resource-${Date.now()}`;
            data[domainId].resources.push({
                id,
                text,
                amount: '',
                type: 'time'
            });
            renderDomain(domainId);
            saveAll();
        }

        // Add Risk
        function addRisk(domainId) {
            const text = prompt('Enter Risk:');
            if (!text || text.trim() === '') return;
            
            const id = `risk-${Date.now()}`;
            data[domainId].risks.push({
                id,
                text,
                mitigation: '',
                mitigated: false
            });
            renderDomain(domainId);
            saveAll();
        }

        // Delete Item
        function deleteItem(domainId, type, id) {
            if (!confirm('Delete this item?')) return;
            
            data[domainId][type] = data[domainId][type].filter(item => item.id !== id);
            renderDomain(domainId);
            saveAll();
        }

        // Update Item
        function updateItem(domainId, type, id, field, value) {
            const item = data[domainId][type].find(i => i.id === id);
            if (item) {
                item[field] = value;
                if (type === 'milestones' || type === 'risks') {
                    updateCounts(domainId);
                }
                saveAll();
            }
        }

        // Render All
        function renderAll() {
            domains.forEach(domain => {
                renderDomain(domain.id);
            });
        }

        // Render Domain
        function renderDomain(domainId) {
            if (!data[domainId]) return;
            
            // Update objective
            const objectiveEl = document.getElementById(`${domainId}-objective`);
            if (objectiveEl) {
                objectiveEl.value = data[domainId].objective || '';
            }
            
            // Render CSF
            const csfList = document.getElementById(`${domainId}-csf-list`);
            if (csfList) {
                csfList.innerHTML = data[domainId].csf.map(item => `
                    <div class="item">
                        <input type="text" value="${item.text}" 
                               onchange="updateItem('${domainId}', 'csf', '${item.id}', 'text', this.value)">
                        <div class="item-actions">
                            <button onclick="deleteItem('${domainId}', 'csf', '${item.id}')">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Render Milestones
            const milestoneList = document.getElementById(`${domainId}-milestone-list`);
            if (milestoneList) {
                milestoneList.innerHTML = data[domainId].milestones.map(item => `
                    <div class="item">
                        <input type="text" value="${item.text}" 
                               onchange="updateItem('${domainId}', 'milestones', '${item.id}', 'text', this.value)">
                        <div class="item-meta">
                            <label>
                                Deadline
                                <input type="date" value="${item.date || ''}" 
                                       onchange="updateItem('${domainId}', 'milestones', '${item.id}', 'date', this.value)">
                            </label>
                            <label class="milestone-status">
                                <input type="checkbox" ${item.completed ? 'checked' : ''} 
                                       onchange="updateItem('${domainId}', 'milestones', '${item.id}', 'completed', this.checked)">
                                Completed
                            </label>
                        </div>
                        <div class="item-actions">
                            <button onclick="deleteItem('${domainId}', 'milestones', '${item.id}')">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Render Resources
            const resourceList = document.getElementById(`${domainId}-resource-list`);
            if (resourceList) {
                resourceList.innerHTML = data[domainId].resources.map(item => `
                    <div class="item">
                        <input type="text" value="${item.text}" 
                               onchange="updateItem('${domainId}', 'resources', '${item.id}', 'text', this.value)">
                        <div class="item-meta">
                            <label>
                                Amount
                                <input type="text" value="${item.amount || ''}" 
                                       placeholder="e.g., 10 hours/week, $5000"
                                       onchange="updateItem('${domainId}', 'resources', '${item.id}', 'amount', this.value)">
                            </label>
                            <label>
                                Type
                                <select onchange="updateItem('${domainId}', 'resources', '${item.id}', 'type', this.value)">
                                    <option value="time" ${item.type === 'time' ? 'selected' : ''}>Time</option>
                                    <option value="budget" ${item.type === 'budget' ? 'selected' : ''}>Budget</option>
                                    <option value="people" ${item.type === 'people' ? 'selected' : ''}>People</option>
                                </select>
                            </label>
                        </div>
                        <div class="item-actions">
                            <button onclick="deleteItem('${domainId}', 'resources', '${item.id}')">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Render Risks
            const riskList = document.getElementById(`${domainId}-risk-list`);
            if (riskList) {
                riskList.innerHTML = data[domainId].risks.map(item => `
                    <div class="item">
                        <label class="input-label">Risk</label>
                        <input type="text" value="${item.text}" 
                               onchange="updateItem('${domainId}', 'risks', '${item.id}', 'text', this.value)">
                        <label class="input-label">Mitigation Strategy</label>
                        <textarea onchange="updateItem('${domainId}', 'risks', '${item.id}', 'mitigation', this.value)"
                                  placeholder="How will you address this risk?">${item.mitigation || ''}</textarea>
                        <div class="item-meta">
                            <label class="milestone-status">
                                <input type="checkbox" ${item.mitigated ? 'checked' : ''} 
                                       onchange="updateItem('${domainId}', 'risks', '${item.id}', 'mitigated', this.checked)">
                                Mitigated
                            </label>
                        </div>
                        <div class="item-actions">
                            <button onclick="deleteItem('${domainId}', 'risks', '${item.id}')">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                `).join('');
            }
            
            updateCounts(domainId);
        }

        // Update Counts
        function updateCounts(domainId) {
            if (!data[domainId]) return;
            
            const csfTotal = data[domainId].csf.length;
            const csfCount = document.getElementById(`${domainId}-csf-count`);
            if (csfCount) {
                csfCount.textContent = `${csfTotal}/5`;
            }
            
            const milestoneTotal = data[domainId].milestones.length;
            const milestoneCompleted = data[domainId].milestones.filter(m => m.completed).length;
            const milestoneCount = document.getElementById(`${domainId}-milestone-count`);
            if (milestoneCount) {
                milestoneCount.textContent = `${milestoneCompleted}/${milestoneTotal}`;
            }
            
            const riskTotal = data[domainId].risks.length;
            const riskMitigated = data[domainId].risks.filter(r => r.mitigated).length;
            const riskCount = document.getElementById(`${domainId}-risk-count`);
            if (riskCount) {
                riskCount.textContent = `${riskMitigated}/${riskTotal}`;
            }
        }

        // Save All
        function saveAll() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        // Export Data
        function exportData() {
            const exportData = {
                timestamp: new Date().toISOString(),
                data: data
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `strategy-deployment-matrix-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
